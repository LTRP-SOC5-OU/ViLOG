{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "Resource": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "topics": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Topic"
          }
        },
        "video": {
          "anyOf": [
            {
              "$ref": "#/definitions/Video"
            },
            {
              "type": "null"
            }
          ]
        },
        "url": {
          "type": "string"
        },
        "details": {
          "type": "object"
        }
      }
    },
    "Video": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "resource": {
          "$ref": "#/definitions/Resource"
        },
        "tracks": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Track"
          }
        },
        "providerUrl": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "Track": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "video": {
          "$ref": "#/definitions/Video"
        },
        "kind": {
          "type": "string"
        },
        "language": {
          "type": "string"
        }
      }
    },
    "Topic": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "resource": {
          "$ref": "#/definitions/Resource"
        },
        "keywords": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Keyword"
          }
        },
        "topicSection": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/TopicSection"
          }
        },
        "activities": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Activity"
          }
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "timeRequired": {
          "type": "integer"
        },
        "creator": {
          "$ref": "#/definitions/User"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        },
        "details": {
          "type": "object"
        }
      }
    },
    "Keyword": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "topics": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Topic"
          }
        },
        "books": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Book"
          }
        },
        "name": {
          "type": "string"
        }
      }
    },
    "LtiContext": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "resourceLinks": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/LtiResourceLink"
          }
        },
        "title": {
          "type": "string"
        }
      }
    },
    "LtiResourceLink": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "context": {
          "$ref": "#/definitions/LtiContext"
        },
        "title": {
          "type": "string"
        },
        "book": {
          "$ref": "#/definitions/Book"
        }
      }
    },
    "Book": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "keywords": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Keyword"
          }
        },
        "sections": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Section"
          }
        },
        "ltiResourceLinks": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/LtiResourceLink"
          }
        },
        "name": {
          "type": "string"
        },
        "abstruct": {
          "type": "string"
        },
        "author": {
          "$ref": "#/definitions/User"
        },
        "publishedAt": {
          "type": "string",
          "format": "date-time"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        },
        "details": {
          "type": "object"
        }
      }
    },
    "Section": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "book": {
          "$ref": "#/definitions/Book"
        },
        "topicSections": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/TopicSection"
          }
        },
        "order": {
          "type": "integer"
        },
        "name": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "TopicSection": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "section": {
          "$ref": "#/definitions/Section"
        },
        "topic": {
          "$ref": "#/definitions/Topic"
        },
        "order": {
          "type": "integer"
        }
      }
    },
    "User": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "createdTopics": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Topic"
          }
        },
        "writtenBooks": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Book"
          }
        },
        "ltiUserId": {
          "type": "string"
        },
        "activities": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Activity"
          }
        },
        "name": {
          "type": "string"
        }
      }
    },
    "Activity": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "topic": {
          "$ref": "#/definitions/Topic"
        },
        "learner": {
          "$ref": "#/definitions/User"
        },
        "type": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "Session": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "sid": {
          "type": "string"
        },
        "data": {
          "type": "string"
        },
        "expires": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "Account": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "nonce": {
          "type": "string"
        },
        "timestamp": {
          "type": "integer"
        }
      }
    }
  },
  "type": "object",
  "properties": {
    "resource": {
      "$ref": "#/definitions/Resource"
    },
    "video": {
      "$ref": "#/definitions/Video"
    },
    "track": {
      "$ref": "#/definitions/Track"
    },
    "topic": {
      "$ref": "#/definitions/Topic"
    },
    "keyword": {
      "$ref": "#/definitions/Keyword"
    },
    "ltiContext": {
      "$ref": "#/definitions/LtiContext"
    },
    "ltiResourceLink": {
      "$ref": "#/definitions/LtiResourceLink"
    },
    "book": {
      "$ref": "#/definitions/Book"
    },
    "section": {
      "$ref": "#/definitions/Section"
    },
    "topicSection": {
      "$ref": "#/definitions/TopicSection"
    },
    "user": {
      "$ref": "#/definitions/User"
    },
    "activity": {
      "$ref": "#/definitions/Activity"
    },
    "session": {
      "$ref": "#/definitions/Session"
    },
    "account": {
      "$ref": "#/definitions/Account"
    }
  }
}